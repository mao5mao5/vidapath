Domain is {{ required ".Values.global.domainName is required!" .Values.global.domainName }}

Cytomine is being deployed at {{ .Values.global.domainName }}.

{{- $cytomineSecretObj := (lookup "v1" "Secret" .Release.Namespace "cytomine-admin-iam-secret") | default dict }}
{{- $cytomineSecretData := (get $cytomineSecretObj "data") | default dict }}
{{- $cytomineSecret := (get $cytomineSecretData "password") | default "" }}

{{- $iamSecretObj := (lookup "v1" "Secret" .Release.Namespace "admin-iam-secret") | default dict }}
{{- $iamSecretData := (get $iamSecretObj "data") | default dict }}
{{- $iamSecret := (get $iamSecretData "password") | default "" }}

For login in cytomine use admin and password from:

{{ if $cytomineSecret }}
admin:{{ $cytomineSecret | b64dec }}
{{ else }}
`kubectl -n {{ .Release.Namespace }} get secrets cytomine-admin-iam-secret -o json | jq -r .data.password | base64 -d -`

(since this is probably the first time you install it, we cannot display the password, but from the second time it will displayed here)

{{ end }}

For login in keycloak (/iam) use admin and password from:

{{ if $iamSecret }}
admin:{{ $iamSecret | b64dec }}
{{ else }}
`kubectl -n {{ .Release.Namespace }} get secrets admin-iam-secret -o json | jq -r .data.password | base64 -d -`

(since this is probably the first time you install it, we cannot display the password, but from the second time it will displayed here)

{{ end }}


It takes a few minutes for it to fully deploy, so please be patient. This usually takes about 5 minutes, and if the site isn't reachable in 10 minutes,
something has likely gone wrong.
